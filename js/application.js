
var AppTitle='Projects and Payroll';var AppVersion='Beta 2.0';var AppURL='http://';Ext.BLANK_IMAGE_URL='extjs/resources/images/default/s.gif';Ext.chart.Chart.CHART_URL="extjs/resources/charts.swf";var global_printer=null;var loadMask=new Ext.LoadMask(Ext.getBody(),{msg:"Please wait..."});function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
var cp=new Ext.state.CookieProvider({expires:new Date(new Date().getTime()+(1000*60*60*24*30))});Ext.state.Manager.setProvider(cp);Ext.onReady(function(){setTimeout(function(){Ext.get('loading').remove();Ext.get('loading-mask').fadeOut({remove:true});},250);Ext.QuickTips.init();var timesheetPanel=new Ext.Panel({title:'Timesheets',tbar:[{id:'delete',iconCls:'add',text:'Add Timesheet',qtip:'Add Timesheet',handler:function(event,toolEl,panel){}}],iconCls:'timesheet',border:false,autoScroll:true,items:[]});var menu=[{text:'Administration',expanded:true,children:[{text:'Companies',id:'companies',href:'companies.php',iconCls:'company',leaf:true},{text:'Employees',id:'users',href:'users.php',iconCls:'users',leaf:true},{text:'Projects',href:'projects.php',id:'projects',source:false,iconCls:'project',leaf:true},{text:'Project Map',id:'map',href:'map.php',iconCls:'map',leaf:true},{text:'Scheduling',id:'scheduling',href:'scheduling.php',iconCls:'calendar',leaf:true},{text:'Visual Planner',id:'planner',href:'user_schedule.php',iconCls:'calendar',leaf:true},{text:'Timesheets',id:'timesheets',href:'timesheets.html',iconCls:'timesheet',leaf:true},{text:'Settings',id:'settings',href:'settings.php',iconCls:'cog',leaf:true},{text:'Admin',id:'admin',href:'admin/index.php',iconCls:'cog',leaf:true}]},{text:'Reports',expanded:true,children:[{text:'Employee Payroll',href:'payroll_employee.php',id:'employee_detail',source:false,iconCls:'users',leaf:true},{text:'Labor',id:'labor',href:'labor.php',iconCls:'report_user',leaf:true},{text:'Days Off',id:'daysoff',href:'daysoff.php',iconCls:'cake',leaf:true}]},{text:'Stats',id:'stats',href:'stats.php',iconCls:'stats',leaf:true},{text:'About',id:'about',href:'about.php',iconCls:'info',leaf:true}];var alertsPanel={id:'alerts-panel',title:'Information',region:'center',collapsible:true,bodyStyle:'padding-bottom:15px;background:#eee;',autoScroll:true,autoLoad:{"url":'../Includes/user_alerts.php',"scripts":true}};var menuPanel=new Ext.tree.TreePanel({id:'menuPanel',collapsed:false,width:270,height:340,minSize:150,region:'north',border:false,rootVisible:false,title:'Menu',autoScroll:true,autoExpand:true,lines:false,useArrows:true,loader:new Ext.tree.TreeLoader(),root:new Ext.tree.AsyncTreeNode({expanded:true,leaf:false,text:'Tree Root',children:menu})});var detailsPanel={id:'details-panel',border:false,title:'Information',region:'center',bodyStyle:'padding-bottom:15px;background:#f9f9f9;',autoScroll:true,html:'<p class="details-info">When you select an action from the menu tree, additional details will display here.</p>'};var detailPanel=new Ext.Panel({title:'Information',iconCls:'info',border:false,autoScroll:true,items:[detailsPanel]});var tasksPanel=new Ext.Panel({title:'Tasks',iconCls:'tasks',border:false,autoScroll:true,items:[]});var projectsPanel=new Ext.Panel({title:'Projects',iconCls:'project',border:false,autoScroll:true,items:[]});var companyPanel=new Ext.Panel({title:'Companies',iconCls:'company',border:false,autoScroll:true,items:[]});var usersPanel=new Ext.Panel({title:'Users',iconCls:'users',border:false,autoScroll:true,items:[]});var accordion=new Ext.Panel({split:true,region:'center',border:false,autoScroll:true,containerScroll:true,layout:'accordion',items:[menuPanel,detailPanel]});var viewport=new Ext.Viewport({stateId:'viewport-stateid',stateful:true,layout:'border',defaults:{collapsible:false,split:true},items:[{xtype:'box',region:'north',applyTo:'header',height:30},{region:'center',id:'iframe',scrolling:true,containerScroll:true,autoScroll:true,xtype:'iframepanel',border:true,defaultSrc:'about.php',title:'&#160;'},{title:'',layout:'border',autoScroll:true,region:'west',width:185,minSize:100,maxSize:500,margins:'2 0 5 5',maxWidth:300,split:true,autoScroll:false,items:[menuPanel,detailsPanel]}]});var tree=Ext.getCmp('menuPanel');var iframe=Ext.getCmp('iframe');var detailEl=null;var currentEx=null;function showDetail(ex){if(!detailEl){var bd=Ext.getCmp('details-panel').body;bd.update('').setStyle('background','#fff');detailEl=bd.createChild();}
detailEl.hide().update(Ext.getDom(ex+'-details').innerHTML).slideIn('l',{stopFx:true,duration:.2});Ext.state.Manager.set('ex',ex);if(ex!==currentEx){var detailSrc=Ext.getDom(ex+'-details');if(detailSrc){detailEl.hide().update(detailSrc.innerHTML).slideIn('t');currentEx=ex;}}}
var detailEl;tree.on({click:{stopEvent:true,fn:function(n,e){e.stopEvent();if(n.parentNode&&n.parentNode.id){if(Ext.fly(n.parentNode.id+'-details')){showDetail(n.parentNode.id);}}
if(n.id){if(Ext.fly(n.id+'-details')){showDetail(n.id);}}
if(n.attributes.href){if(n.attributes.source){var src='source.php?file='+n.attributes.href;}else{var src=n.attributes.href;}
iframe.setSrc.defer(350,iframe,[src,true]);}
if(!n.isLeaf()){n.toggle();}}}});iframe.on('documentloaded',function(){var iw=this.iframe.getWindow();var loc=iw.location;var title='';if('/source.php'!==loc.pathname){title=iw.Ext.fly('page-title').dom.innerHTML;}else{title='Direct Link: <a href="'+loc.protocol+'//'+loc.host;iw.Ext.fly('page-title').dom.innerHTML;}
this.setTitle(title);});var page=Ext.urlDecode(window.location.search.substr(1));if(page&&page.ex){var node=tree.getNodeById(page.ex);if(node){node.parentNode.expand(false,false,function(){node.expand()});}
showDetail(page.ex);console.info(page.ex);iframe.setSrc.defer(350,iframe,[Example.root+page.ex+'.html',true]);}else{var ex=Ext.state.Manager.get('ex','root');console.log(ex);showDetail(ex);}});